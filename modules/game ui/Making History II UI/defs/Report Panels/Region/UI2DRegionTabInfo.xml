<?xml version="1.0" encoding="UTF-8"?>
<locust xmlns="http://www.muzzylane.com/ml/schema/2009/04/locust">
	<objectDef type="UI2DRegionTabInfo" superType="mlui.UI2DElement">

	<!-- Regional Status -->
		<object type="mlui.UI2DText" name="objStatusLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialGold16Left"/>
			<property name="strText" from="locale.SID.UI.Status"/>
			<property name="nX" value="13"/>
			<property name="nY" value="143"/>
			<property name="nWidth" value="200"/>
			<property name="nHeight" value="16"/>
		</object>

		<object type="mlui.UI2DImage" name="objLeftPaneBG">
			<property name="tmplImage" value="skin.ImgReportBubbleGrayClearBRSq"/>
			<property name="nX" value="10"/>
			<property name="nY" value="161"/>
			<property name="nWidth" value="291"/>
			<property name="nHeight" value="521"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="mlui.UI2DImage" name="objLeftPaneGradient">
			<property name="tmplImage" value="skin.ImgGradientGray"/>
			<property name="nX" value="12"/>
			<property name="nY" value="163"/>
			<property name="nWidth" value="287"/>
			<property name="nHeight" value="177"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="UI2DRegionInfoLeft" name="objInfoLeft">
			<property name="nX" value="12"/>
			<property name="nY" value="167"/>
			<property name="nHeight" value="521"/>
			<property name="nWidth" value="292"/>
			<property name="eMouseBehavior" value="MOUSE_BHVR_IGNORE_THIS_ELEMENT"/>
		</object>

		<object type="mlui.UI2DImage" name="objMiddlePaneBG">
			<property name="tmplImage" value="skin.ImgReportBubbleGrayClearBSq"/>
			<property name="nX" value="300"/>
			<property name="nY" value="161"/>
			<property name="nWidth" value="292"/>
			<property name="nHeight" value="521"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="mlui.UI2DImage" name="objMiddlePaneGradient">
			<property name="tmplImage" value="skin.ImgGradientGray"/>
			<property name="nX" value="302"/>
			<property name="nY" value="163"/>
			<property name="nWidth" value="288"/>
			<property name="nHeight" value="177"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="UI2DRegionInfoMiddle" name="objInfoMiddle">
			<property name="nX" value="305"/>
			<property name="nY" value="166"/>
			<property name="nHeight" value="521"/>
			<property name="nWidth" value="292"/>
		</object>

		<object type="mlui.UI2DImage" name="objRightPaneBG">
			<property name="tmplImage" value="skin.ImgReportBubbleGrayClearBLSq"/>
			<property name="nX" value="591"/>
			<property name="nY" value="161"/>
			<property name="nWidth" value="292"/>
			<property name="nHeight" value="521"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="mlui.UI2DImage" name="objRightPaneGradient">
			<property name="tmplImage" value="skin.ImgGradientGray"/>
			<property name="nX" value="593"/>
			<property name="nY" value="163"/>
			<property name="nWidth" value="288"/>
			<property name="nHeight" value="177"/>
			<property name="nDepth" value="-100"/>
		</object>

		<object type="UI2DRegionInfoRight" name="objInfoRight">
			<property name="nX" value="597"/>
			<property name="nY" value="167"/>
			<property name="nHeight" value="521"/>
			<property name="nWidth" value="292"/>
		</object>


		<object type="mlui.UI2DImage" name="objBottomPaneBG">
			<property name="tmplImage" value="skin.ImgWhite"/>
			<property name="nX" value="10"/>
			<property name="nY" value="400"/>
			<property name="nWidth" value="873"/>
			<property name="nHeight" value="282"/>
			<property name="nDepth" value="-100"/>
		</object>
		<object type="mlui.UI2DImage" name="objBottomPaneBG">
			<property name="tmplImage" value="skin.ImgReportBubbleGrayClearBLSq"/>
			<property name="nX" value="10"/>
			<property name="nY" value="400"/>
			<property name="nWidth" value="873"/>
			<property name="nHeight" value="282"/>
			<property name="nDepth" value="-100"/>
		</object>        
		<object type="UI2DRegionInfoBottom" name="objInfoBottom">
			<property name="nX" value="12"/>
			<property name="nY" value="402"/>
			<property name="nWidth" value="869"/>
			<property name="nHeight" value="288"/>
		</object>
        
	</objectDef>

	<objectDef type="UI2DRegionInfoLeft" superType="mlui.UI2DElement">
		<!-- World Power Points -->
		<object name="objWorldPowerPoints" type="WorldPowerPoints">
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="277"/>
			<property name="nHeight" value="98"/>
		</object>

		<!-- Revolt Risk -->
		<object name="objRevoltRisk" type="RevoltRisk">
			<property name="nX" value="0"/>
			<property name="nY" value="124"/>
			<property name="nWidth" value="277"/>
			<property name="nHeight" value="35"/>
		</object>
		<object name="objRegionOutput" type="RegionOutput">
			<property name="nX" value="0"/>
			<property name="nY" value="122"/>
			<property name="nWidth" value="300"/>
			<property name="nHeight" value="107"/>
		</object>
	</objectDef>

	<objectDef type="RegionOutput" superType="mlui.UI2DElement">

        <object type="mlui.UI2DText" name="objLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.RevoltRiskModifiers"/>
			<property name="nX" value="33"/>
			<property name="nY" value="44"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="10"/>
		</object>
        
		<object type="mlui.UI2DImage" name="objFoodDemandModBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="33"/>
			<property name="nY" value="54"/>
			<property name="nWidth" value="250"/>
			<property name="nHeight" value="30"/>
			<property name="nDepth" value="-50"/>
		</object>
        
		<object type="common_ui.UI2DListHorz" name="objBubbles">
			<property name="nSpacing" value="-1"/>
			<property name="nX" value="37"/>
			<property name="nY" value="54"/>
			
			<object type="UI2DRegionFoodDemandModElem" name="objElements">
                <property name="tmplImage" value="skin.ImgInfoIconStabilitySm"/>
                <property name="fAmount" >
                    gs_tbg.getGameSysNation(mh2data.objAvatar).getNationsStability(spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).nStability).nRegionStabilityModifier
                </property>
                <property name="strToolTip" from="locale.SID.UI.NationalStability" />
			</object>
			<object type="UI2DRegionFoodDemandModElem" name="objElements">
                <property name="tmplImage" value="skin.ImgInfoIconCultureLatin"/>
                <property name="fAmount" >
                    if(spdata.objRegionData.objRegion.tmplCulture == spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationTemplate().tmplCulture
                    ,
                    '0%'
                    ,
                    gs_tbg.getGameSysRegion(mh2data.objAvatar).nCultureStabilityModifier + '%'
                    )
                </property>
                <property name="strToolTip" from="locale.SID.UI.Culture" />
			</object>
			<object type="UI2DRegionFoodDemandModElem" name="objElements">
                <property name="tmplImage" from="mh2data.objReligionDisplayTable.getEntry(spdata.objRegionData.objRegion.tmplReligion).tmplImage"/>
                <property name="fAmount" >
                    if(spdata.objRegionData.objRegion.tmplReligion == spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationTemplate().tmplReligion
                    ,
                    '0%'
                    ,
                    gs_tbg.getGameSysRegion(mh2data.objAvatar).nReligionStabilityModifier + '%'
                    )
                </property>
                <property name="strToolTip" from="locale.SID.UI.Religion" />
			</object>
			<object type="UI2DRegionFoodDemandModElem" name="objElements">
                <property name="tmplImage" value="skin.ImgInfoIconEthnicityMestizo"/>
                <property name="fAmount" >
                    if(spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationalityTemplate().tmplEthnicities.contains(spdata.objRegionData.objRegion.tmplEthnicity)
                    ,
                    '0%'
                    ,
                    gs_tbg.getGameSysRegion(mh2data.objAvatar).nEthnicityStabilityModifier + '%'
                    )
                </property>
                <property name="strToolTip" from="locale.SID.UI.Ethnicity" />
			</object>
        </object>
	</objectDef>

	<objectDef type="UI2DRegionInfoMiddle" superType="mlui.UI2DElement">
		<!-- Regional Nationality -->
		<object name="objRegionNationality" type="RegionNationality">
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="289"/>
			<property name="nHeight" value="104"/>
		</object>

		<!-- MPU Growth Rate -->
		<object name="objMPUGrowth" type="MPUGrowth">
			<property name="nX" value="0"/>
			<property name="nY" value="124"/>
			<property name="nWidth" value="289"/>
			<property name="nHeight" value="125"/>
		</object>
	</objectDef>

	<objectDef type="UI2DRegionInfoRight" superType="mlui.UI2DElement">
		<propertyDef name="objNation" type="gs_tbg.Nation">
			spdata.objRegionData.objRegion.refOwner.resolve(mh2data.objAvatar)
		</propertyDef>

	<!-- Supply Rate -->
		<object name="objSupplyRate" type="SupplyRate">
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="289"/>
			<property name="nHeight" value="84"/>
		</object>

	<!-- Food Demand -->
		<object name="objFoodDemand" type="FoodDemand">
			<property name="nX" value="0"/>
			<property name="nY" value="124"/>
			<property name="nWidth" value="289"/>
			<property name="nHeight" value="125"/>
		</object>
	</objectDef>

	<objectDef type="UI2DRegionInfoBottom" superType="mlui.UI2DElement">

		<object type="mlui.UI2DText" name="objStatusLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialGold16Left"/>
			<property name="strText" from="locale.SID.UI.RegionImprovements"/>
			<property name="nX" value="4"/>
			<property name="nY" value="10"/>
			<property name="nWidth" value="200"/>
			<property name="nHeight" value="16"/>
		</object>
            
        <object type="common_ui.UI2DListHorz" name="objNotificationBubbles">
            <property name="nX" value="4"/>
            <property name="nY" value="30"/>
            <property name="nSpacing" value="4"/>
            
            <!-- Airbase -->
            <object name="objElements" type="UI2DRegionProjectImprovementBubble" existsWhile="spdata.objRegionData.objRegion.objAirbaseImprovement != null">
                <property name="objRegionImprovement" from="spdata.objRegionData.objRegion.objAirbaseImprovement"/>
                <property name="tmplRegionImprovement" from="self.objRegionImprovement.tmplUnitBase.resolve()"/>
                <property name="tmplImage" value="skin.ImgRegionAirBaseLG"/>
            </object>
            
            <!-- Transportation -->
            <object name="objElements" type="UI2DRegionProjectImprovementBubble" existsWhile="spdata.objRegionData.objRegion.objTransportationImprovement != null">
                <property name="objRegionImprovement" from="spdata.objRegionData.objRegion.objTransportationImprovement"/>
                <property name="tmplRegionImprovement" from="self.objRegionImprovement.tmplTransportationImprovement.resolve()"/>
                <property name="tmplImage" from="mh2data.objTransportationProdDisplayTable.getEntry(self.tmplRegionImprovement).tmplImage"/>
                <property name="tmplIcon" value="skin.ImgMilitaryTabSpeed"/>
                <property name="nModifier" from="self.tmplRegionImprovement.nModifierValue"/>
                <property name="nImageY" from="92"/>
                <property name="bPercent" value="true"/>
            </object>
            
            <!-- Fortification -->
            <object name="objElements" type="UI2DRegionProjectImprovementBubble" existsWhile="spdata.objRegionData.objRegion.objFortificationImprovement != null">
                <property name="objRegionImprovement" from="spdata.objRegionData.objRegion.objFortificationImprovement"/>
                <property name="tmplRegionImprovement" from="self.objRegionImprovement.tmplFortificationImprovement.resolve()"/>
                <property name="tmplImage" from="mh2data.objFortificationDisplayTable.getEntry(self.tmplRegionImprovement).tmplImage"/>
                <property name="tmplIcon" value="skin.ImgInfoIconDefenseSm"/>
                <property name="nModifier" from="sum(map(?{modifier: modifier.nModifierValue}, filter(?{combatmod: combatmod.eCombatProperty == gs_tbg.CombatProperty.COMBAT_PROPERTY_RESISTANCE}, self.tmplRegionImprovement.objCombatModifiers)))"/>
                <property name="bPercent" value="true"/>
            </object>
            
            <!-- AA Defense -->
            <object name="objElements" type="UI2DRegionProjectImprovementBubble" existsWhile="spdata.objRegionData.objRegion.objAADefenseImprovement != null">
                <property name="objRegionImprovement" from="spdata.objRegionData.objRegion.objAADefenseImprovement"/>
                <property name="tmplRegionImprovement" from="self.objRegionImprovement.tmplAADefenseImprovement.resolve()"/>
                <property name="tmplImage" from="mh2data.objAADefenseDisplayTable.getEntry(self.tmplRegionImprovement).tmplImage"/>
                <property name="tmplIcon" value="skin.ImgUnitIconAirAttack"/>
                <property name="nModifier" from="(self.tmplRegionImprovement.nPercentHit * self.tmplRegionImprovement.nShots) / 10"/>
            </object>
            
            <!-- Coastal Defense -->
            <object name="objElements" type="UI2DRegionProjectImprovementBubble" existsWhile="spdata.objRegionData.objRegion.objCoastalDefenseImprovement != null">
                <property name="objRegionImprovement" from="spdata.objRegionData.objRegion.objCoastalDefenseImprovement"/>
                <property name="tmplRegionImprovement" from="self.objRegionImprovement.tmplCoastalDefenseImprovement.resolve()"/>
                <property name="tmplImage" from="mh2data.objCoastalDefenseDisplayTable.getEntry(self.tmplRegionImprovement).tmplImage"/>
                <property name="tmplIcon" value="skin.ImgInfoIconDefenseSm"/>
                <property name="nModifier" from="(self.tmplRegionImprovement.nPercentHit * self.tmplRegionImprovement.nShots) / 10"/>
                <property name="bPercent" value="true"/>
            </object>
		</object>
	</objectDef>
    
     <objectDef type="UI2DRegionProjectImprovementBubble" superType="mlui.UI2DElement" >
        <propertyDef name="objRegionImprovement" type="gs_tbg.RegionImprovement"/>
        <propertyDef name="tmplRegionImprovement" type="Template"/>
        <propertyDef name="tmplImage" type="TemplateRef" restriction="mlmedia.ImageTemplate"/>
        <propertyDef name="tmplIcon" type="TemplateRef" restriction="mlmedia.ImageTemplate"/>
        <propertyDef name="nModifier" type="int"/>
        <propertyDef name="bPercent" type="bool" default="false" />
        
        <property name="nWidth" from="90"/>
        <property name="nHeight" from="140"/>
        
		<object type="mlui.UI2DImage" name="objBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTan"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" from="def.nWidth"/>
			<property name="nHeight" from="def.nHeight"/>
		</object>
		
		<object type="mlui.UI2DImage" name="objBuildingBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="5"/>
			<property name="nY" value="5"/>
			<property name="nWidth" from="80"/>
			<property name="nHeight" from="79"/>
		</object>
        
		<object type="mlui.UI2DImage" name="objBuildingIcon" existsWhile="self.objRegionImprovement != null" >
			<property name="tmplImage" from="def.tmplImage" />
			<property name="nX" value="7"/>
			<property name="nY" value="7"/>
			<property name="nWidth" value="78"/>
			<property name="nHeight" value="77"/>
		</object>
		
		<object type="UI2DBldgHealthBar" name="objHealth" existsWhile="self.objRegionImprovement != null" >
			<property name="fPercent" from="float(float(def.objRegionImprovement.nHitPoints) / float(def.tmplRegionImprovement.nHitPoints))"/>
			<property name="nX" value="5"/>
			<property name="nY" value="115"/>
			<property name="nHeight" value="4"/>
			<property name="nWidth" value="80"/>
		</object>
        
		<object type="mlui.UI2DImage" name="objResourceBG" existsWhile="self.tmplIcon != null" >
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="5"/>
			<property name="nY" value="86"/>
			<property name="nWidth" from="80"/>
			<property name="nHeight" from="25"/>
		</object>
        
		<propertyDef name="nImageY" type="int" default="86" />
		<object type="mlui.UI2DImage" name="objBuildingIconSm" existsWhile="self.tmplIcon != null" >
			<property name="tmplImage" from="def.tmplIcon"/>
			<property name="nX" value="8"/>
			<property name="nY" from="def.nImageY"/>
			<property name="nWidth" from="def.nWidth"/>
			<property name="nHeight" from="30"/>
		</object>
				
		<object type="mlui.UI2DText" name="objResourcesOutputText" existsWhile="self.tmplIcon != null" >
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue18RightMiddle"/>
			<property name="strText" >
                if(def.bPercent,
                    def.nModifier + '%'
                    ,
                    if(def.nModifier GT 0, '+' + def.nModifier, def.nModifier)
                )
            </property>
			<property name="nX" value="0"/>
			<property name="nY" value="87"/>
			<property name="nWidth" from="def.nWidth-10"/>
			<property name="nHeight" from="30"/>
		</object>

        <propertyDef name="objValidRegionOutputs" type="gs_tbg.RegionOutputTemplate" variable="true" >
                filter(?{output: 
					output.canQueue(mh2data.objAvatar, spdata.objRegionData.objRegion, self.tmplRegionImprovement)},
				gs_tbg.getAllRegionOutputs(mh2data.objAvatar))
		</propertyDef>
        
        
		<object type="EventUpgradeRegionProject" name="EventUpgradeRegionProjects" tiedTo="def.objValidRegionOutputs">
			<property name="objRegionOutputTemplate" from="tiedTo"/>
			<property name="objResourceImprovement" from="def.objRegionImprovement"/>
			<script type="application/javascript"><![CDATA[
				function execute(event, owner)
				{
					var action = gs_tbg.GActAddRegionProject.create({
						"refRegion": spdata.objRegionData.objRegion,
						"tmplRegionOutput": self.objRegionOutputTemplate,
                        "objParam" :  self.objResourceImprovement
					});
					mh2data.objAvatar.sendAction(action);					
				}
			]]></script>
		</object>
        
		<!--<object type="mlui.UI2DButton" name="objResourceRepair" existsWhile="spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar) == mh2data.objNation">			
			<property name="tmplButtonStyle" from="skin.getTemplateRef(mlmedia.ButtonStyleTemplate, 'BtnStyleBldgButtonRepair')"/>
            <property name="strToolTip" from="locale.SID.UI.Repair"/>	
			<property name="nX" value="5"/>
			<property name="nY" value="120"/>
			<property name="nDepth" value="3"/>
			<property name="nDefaultWidth" from="19"/>
			<property name="nDefaultHeight" from="19"/>
			<object type="mlevent.EventHandlerMap" name="objEventHandlerMap">
				<object type="mlevent.EvtHdlrMethod" name="objHandlers">
					<property name="otEventType" value="mlui.EventButtonClicked"/>
					<script type="application/javascript"><![CDATA[
						function handle(event, owner)
						{
							log("TODO :: repair" + def);
						}
					]]></script>
				</object>					
			</object>
		</object>-->	
       
		<!--<object type="mlui.UI2DButton" name="objResourceUp" existsWhile="spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar) == mh2data.objNation">			
            <property name="strToolTip" from="locale.SID.UI.Upgrade"/>	
			<property name="tmplButtonStyle" from="skin.getTemplateRef(mlmedia.ButtonStyleTemplate, 'BtnStyleBldgButtonUpgrade')"/>
			<property name="nX" value="25"/>
			<property name="nY" value="120"/>
			<property name="nDepth" value="3"/>
			<property name="nDefaultWidth" from="19"/>
			<property name="nDefaultHeight" from="19"/>
			<object type="mlevent.EventHandlerMap" name="objEventHandlerMap">
				<object type="mlevent.EvtHdlrMethod" name="objHandlers">
					<property name="otEventType" value="mlui.EventButtonClicked"/>
					<script type="application/javascript"><![CDATA[
						function handle(event, owner)
						{
							log("" + def.objValidRegionOutputs);
                            return;
                            
                            menuX = def.nScreenX;
							menuY = def.nScreenY + 120;
							
							var menudata = common_elements.MenuData.create({
								"vecPosition": Vec3D(menuX, menuY, 0.0),
								"nDefaultItemWidth": 300,
								"nDefaultItemHeight": 24
							});
							
							var menuitem;
							
							for(var i = 0; i < def.EventUpgradeRegionProjects.length; i++)
							{
								log("" + def.EventUpgradeRegionProjects + " " + i);
								log("" + def.EventUpgradeRegionProjects[i]);
								menuitem = common_elements.MenuItem.create({
									"strDisplayName": def.EventUpgradeRegionProjects[i].objRegionOutputTemplate.strDisplayName,
									"objExecuteObject": def.EventUpgradeRegionProjects[i]
								});
								menudata.objItems.add(menuitem);							
							}
							
							menuitem = common_elements.MenuItem.create({
								"strDisplayName": locale.SID.UI.ExitMenu
							});
							menudata.objItems.add(menuitem);
							
							mlui.ActSendEventToUIElement.execute({
								"objElement": mlui.objUI.objRoot,
								"objEvent": common_elements.EventDismissPopUpMenu.create({})
							});
							mlui.ActSendEventToUIElement.execute({
								"objElement": mlui.objUI.objRoot,
								"objEvent": common_elements.EventRequestPopUpMenu.create({
										"objMenuData": menudata
								})
							});
						}
					]]></script>
				</object>					
			</object>
		</object>-->	
       
		<object type="mlui.UI2DButton" name="objResourceCancel" existsWhile="spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar) == mh2data.objNation">			
            <property name="strToolTip" from="locale.SID.UI.Destroy"/>	
			<property name="tmplButtonStyle" from="skin.getTemplateRef(mlmedia.ButtonStyleTemplate, 'BtnStyleBldgButtonDestroy')"/>
			<property name="nX" value="45"/>
			<property name="nY" value="120"/>
			<property name="nDepth" value="3"/>
			<property name="nDefaultWidth" from="19"/>
			<property name="nDefaultHeight" from="19"/>
			<object type="mlevent.EventHandlerMap" name="objEventHandlerMap">
				<object type="mlevent.EvtHdlrMethod" name="objHandlers">
					<property name="otEventType" value="mlui.EventButtonClicked"/>
					<script type="application/javascript"><![CDATA[
						function handle(event, owner)
						{
							if(spdata.objRegionData.objRegion.canCommand(mh2data.objAvatar, mh2data.objNation))
							{
                                var eImprovementType;
                                if(def.tmplRegionImprovement.instanceOf(gs_tbg.TransportationImprovementTemplate))
                                {
                                    eImprovementType =  gs_tbg.RegionImprovementType.IMPROVEMENT_TYPE_TRANSPORTATION
                                }
                                else if(def.tmplRegionImprovement.instanceOf(gs_tbg.FortificationImprovementTemplate))
                                {
                                    eImprovementType =  gs_tbg.RegionImprovementType.IMPROVEMENT_TYPE_FORTIFICATION
                                }
                                else if(def.tmplRegionImprovement.instanceOf(gs_tbg.AADefenseImprovementTemplate))
                                {
                                    eImprovementType =  gs_tbg.RegionImprovementType.IMPROVEMENT_TYPE_AA_DEFENSE
                                }
                                else if(def.tmplRegionImprovement.instanceOf(gs_tbg.CoastalDefenseImprovementTemplate))
                                {
                                    eImprovementType =  gs_tbg.RegionImprovementType.IMPROVEMENT_TYPE_COASTAL_DEFENSE
                                }
                                else if(def.tmplRegionImprovement.instanceOf(gs_tbg.UnitBaseTemplate))
                                {
                                    eImprovementType =  gs_tbg.RegionImprovementType.IMPROVEMENT_TYPE_AIRBASE
                                }
                                
								var action = gs_tbg.GActDismantleRegionImprovement.create({
									"refRegion": spdata.objRegionData.objRegion,
									"eImprovementType": eImprovementType  
								});
								mh2data.objAvatar.sendAction(action);		
							}
						}
					]]></script>
				</object>					
			</object>
		</object>		
       
		<object type="mlui.UI2DButton" name="objResourceEncyc">		
            <property name="strToolTip" from="locale.SID.UI.Encyclopedia"/>	
			<property name="tmplButtonStyle" from="skin.getTemplateRef(mlmedia.ButtonStyleTemplate, 'BtnStyleBldgButtonInfo')"/>
			<property name="nX" value="65"/>
			<property name="nY" value="120"/>
			<property name="nDepth" value="3"/>
			<property name="nDefaultWidth" from="19"/>
			<property name="nDefaultHeight" from="19"/>
			<object type="mlevent.EventHandlerMap" name="objEventHandlerMap">
				<object type="mlevent.EvtHdlrMethod" name="objHandlers">
					<property name="otEventType" value="mlui.EventButtonClicked"/>
					<script type="application/javascript"><![CDATA[
						function handle(event, owner)
						{				
							encydata.objEncyclopediaData.showRegions();
							var entry = def.getEncyEntry();
                            if(entry != null)
                            {
                                encydata.objEncyclopediaData.objSelected = entry.objEntry;
                            }
						}
					]]></script>
				</object>					
			</object>
		</object>
        
        <property name="strToolTip" from="self.tmplRegionImprovement.strDisplayName"/>
        
		<!-- one is a RegionOutputTemplate the other is a varying type, this works though.. -->
		<script type="application/x-locust-query">			
			getEncyEntry = ?{:				
				find(?{entry: entry.objEntry.strDisplayName == self.tmplRegionImprovement.strDisplayName }, encydata.objEncyclopediaData.objEntries)
			}	
		</script>	
    </objectDef>

	<objectDef type="WorldPowerPoints" superType="mlui.UI2DElement">
		<object type="mlui.UI2DImage" name="objWorldPowerPointsIcon">
			<property name="tmplImage" value="skin.ImgInfoIconPoints"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="32"/>
			<property name="nHeight" value="31"/>
		</object>

		<object type="mlui.UI2DText" name="objWorldPowerPointsLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.WorldPowerPoints"/>
			<property name="nX" value="33"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objWorldPowerPoints">
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue18Left"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nTotalPoints"/>
			<property name="nX" value="33"/>
			<property name="nY" value="14"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="18"/>
		</object>

		<object type="mlui.UI2DText" name="objPointSourcesLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.PointSources"/>
			<property name="nX" value="33"/>
			<property name="nY" value="39"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DImage" name="objPointSourcesBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="33"/>
			<property name="nY" value="53"/>
			<property name="nWidth" value="243"/>
			<property name="nHeight" value="45"/>
			<property name="nDepth" value="-50"/>
		</object>

		<object type="mlui.UI2DImage" name="objResearchIcon">
			<property name="tmplImage" value="skin.ImgInfoIconTechSm"/>
			<property name="nX" value="45"/>
			<property name="nY" value="58"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objResearchPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nResearchPoints"/>
			<property name="nX" value="39"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DImage" name="objIPUIcon">
			<property name="tmplImage" value="skin.ImgInfoIconIndustrySm"/>
			<property name="strToolTip" from="locale.SID.UI.IPUs"/>
			<property name="nX" value="87"/>
			<property name="nY" value="58"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objIndustryPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nIPUPoints"/>
			<property name="nX" value="79"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DImage" name="objMetalsIcon">
			<property name="tmplImage" value="skin.ImgInfoIconMetals21x21"/>
			<property name="nX" value="125"/>
			<property name="nY" value="58"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objMetalsPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nMetalsPoints"/>
			<property name="nX" value="119"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DImage" name="objCoalIcon">
			<property name="tmplImage" value="skin.ImgInfoIconCoal21x21"/>
			<property name="nX" value="165"/>
			<property name="nY" value="60"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objCoalPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nCoalPoints"/>
			<property name="nX" value="159"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DImage" name="objOilIcon">
			<property name="tmplImage" value="skin.ImgInfoIconOil21x21"/>
			<property name="nX" value="205"/>
			<property name="nY" value="58"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objOilPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nOilPoints"/>
			<property name="nX" value="199"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DImage" name="objFoodIcon">
			<property name="tmplImage" value="skin.ImgInfoIconFood21x21"/>
			<property name="nX" value="245"/>
			<property name="nY" value="58"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="13"/>
		</object>

		<object type="mlui.UI2DText" name="objFoodPoints">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" from="spdata.objRegionData.objRegion.objPowerPoints.nFoodPoints"/>
			<property name="nX" value="239"/>
			<property name="nY" value="82"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="12"/>
		</object>
	</objectDef>

	<objectDef type="RevoltRisk" superType="mlui.UI2DElement">
		<object type="mlui.UI2DImage" name="objRevoltRiskIcon">
			<property name="tmplImage">
                ?{template:
                switch{
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskNone'):
                    skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskNone')
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskLow'):
                    skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskLow')
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskElevated'):
                    skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskElevated')
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskHigh'):
                    skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskHigh')
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskSevere'):
                    skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskSevere')
                }
                }(gs_tbg.getGameSysNationRelations(mh2data.objAvatar).getRegionStabilityTemplate(spdata.objRegionData.objRegion.nRegionStability))
            </property>
			<!--<property name="strToolTip" from="locale.SID.UI.RevoltRisk + ': ' + spdata.objRegionData.objRegion.nRegionStability"/>-->
			<property name="nX" value="4"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="24"/>
			<property name="nHeight" value="25"/>
		</object>

		<object type="mlui.UI2DText" name="objRevoltRiskLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.RevoltRisk"/>
      <property name="nX" value="33"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="12"/>
		</object>



    <object type="mlui.UI2DText" name="objRevoltRisk">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue16Left"/>
			<property name="strToolTip" from="locale.SID.UI.RevoltRisk + ': ' + spdata.objRegionData.objRegion.nRegionStability"/>
			<property name="strText">
                ?{template:
                switch{
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskNone'):
                    locale.SID.UI.None
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskLow'):
                    locale.SID.UI.Low
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskElevated'):
                    locale.SID.UI.Elevated
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskHigh'):
                    locale.SID.UI.High
                case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskSevere'):
                    locale.SID.UI.Severe
                }
                }(gs_tbg.getGameSysNationRelations(mh2data.objAvatar).getRegionStabilityTemplate(spdata.objRegionData.objRegion.nRegionStability))
            </property>
      <property name="nX" value="33"/>
			<property name="nY" value="16"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="16"/>
		</object>


    <object type="mlui.UI2DText" name="objRevoltRiskLevelLabel">
      <property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
      <property name="strText" from="locale.SID.UI.RegionStability"/>
      <property name="nX" value="135"/>
      <property name="nY" value="0"/>
      <property name="nWidth" value="100"/>
      <property name="nHeight" value="12"/>
    </object>
    
    <object type="mlui.UI2DText" name="objRevoltRiskLevelValue">
      <property name="tmplTextStyle">
        ?{template:
        switch{
          case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskNone'):
          "locale.TxtStyleArialGreen14Left"
          case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskLow'):
          "locale.TxtStyleArialBlue14Left"
          case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskElevated'):
          "locale.TxtStyleArialDarkBrown14Left"
          case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskHigh'):
          "locale.TxtStyleArialDarkOrange14Left"
          case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskSevere'):
          "locale.TxtStyleArialRed14Left"
        }
        }(gs_tbg.getGameSysNationRelations(mh2data.objAvatar).getRegionStabilityTemplate(spdata.objRegionData.objRegion.nRegionStability))
      </property>
      <property name="strText" from="spdata.objRegionData.objRegion.nRegionStability"/>
      <property name="nX" value="135"/>
      <property name="nY" value="16"/>
      <property name="nWidth" value="100"/>
      <property name="nHeight" value="16"/>
    </object>
    
	</objectDef>
  
    <objectDef type="RegionNationality" superType="mlui.UI2DElement">
		<object type="LookupNationIcons" name="objLookupNationIcons">
      <property name="tmplNation" from="spdata.objRegionData.objRegion.tmplNation"/>
      <property name="tmplIdeology" from="spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).tmplIdeology"/>
		</object>

		<object type="mlui.UI2DImage" name="objIcon">
			<property name="tmplImage" from="def.objLookupNationIcons.tmplIcon28x28"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="28"/>
      <property name="strToolTip">
        spdata.objRegionData.objRegion.tmplNation.resolve().tmplDefaultNationality.resolve().strDisplayName  + ' ' + locale.SID.UI.Nationality
      </property>
		</object>

		<object type="mlui.UI2DText" name="objRegionalNationalityLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.RegionalNationality"/>
			<property name="nX" value="29"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objNationality">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue14Left"/>
			<property name="strText">
        spdata.objRegionData.objRegion.tmplNation.resolve().tmplDefaultNationality.resolve().strDisplayName
      </property>
			<property name="nX" value="29"/>
			<property name="nY" value="14"/>
			<property name="nWidth" value="200"/>
			<property name="nHeight" value="14"/>
		</object>

    <object type="mlui.UI2DText" name="objPopulationLabel">
      <property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
      <property name="strText" from="locale.SID.UI.TotalPopulation"/>
      <property name="nX" value="172"/>
      <property name="nY" value="1"/>
      <property name="nWidth" value="200"/>
      <property name="nHeight" value="12"/>
    </object>

    <object type="mlui.UI2DText" name="objPopulation">
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue14Left"/>
      <property name="strText" from="spdata.objRegionData.objRegion.nPopulation.formatNumber(0, true)"/>
      <property name="nX" value="172"/>
      <property name="nY" value="14"/>
      <property name="nWidth" value="100"/>
      <property name="nHeight" value="14"/>
    </object>
      
		<!-- placeholder --><object type="mlui.UI2DImage" name="objCultureIcon">
			<property name="tmplImage" value="skin.ImgInfoIconCultureLatin"/>
			<property name="nX" value="27"/>
			<property name="nY" value="38"/>
			<property name="nWidth" value="24"/>
			<property name="nHeight" value="30"/>
		</object>

		<object type="mlui.UI2DText" name="objCultureLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.Culture"/>
			<property name="nX" value="56"/>
			<property name="nY" value="42"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objCulture">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
			<property name="strText" from="spdata.objRegionData.objRegion.tmplCulture.resolve().strDisplayName"/>
			<property name="nX" value="56"/>
			<property name="nY" value="54"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="15"/>
		</object>

    <object type="mlui.UI2DImage" name="objEthnicityIcon">
			<property name="tmplImage" value="skin.ImgInfoIconEthnicityMestizo"/>
			<property name="nX" value="25"/>
			<property name="nY" value="73"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="29"/>
		</object>

		<object type="mlui.UI2DText" name="objEthnicityLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.Ethnicity"/>
			<property name="nX" value="56"/>
			<property name="nY" value="77"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objEthnicity">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
			<property name="strText" from="spdata.objRegionData.objRegion.tmplEthnicity.resolve().strDisplayName"/>
			<property name="nX" value="56"/>
			<property name="nY" value="89"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="15"/>
		</object>

		<object type="mlui.UI2DImage" name="objReligionIcon">
			<property name="tmplImage" from="mh2data.objReligionDisplayTable.getEntry(spdata.objRegionData.objRegion.tmplReligion).tmplImage"/>
			<property name="nX" value="169"/>
			<property name="nY" value="40"/>
			<property name="nWidth" value="23"/>
			<property name="nHeight" value="23"/>
		</object>

		<object type="mlui.UI2DText" name="objReligionLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.Religion"/>
			<property name="nX" value="195"/>
			<property name="nY" value="42"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objReligion">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
			<property name="strText" from="spdata.objRegionData.objRegion.tmplReligion.resolve().strDisplayName"/>
			<property name="nX" value="195"/>
			<property name="nY" value="54"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="15"/>
		</object>

	</objectDef>

	<objectDef type="MPUGrowth" superType="mlui.UI2DElement">
		<object type="mlui.UI2DImage" name="objPopulationGrowthRateIcon">
			<property name="tmplImage" value="skin.ImgInfoIconPopulationSm"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="25"/>
			<property name="nHeight" value="31"/>
		</object>

		<object type="mlui.UI2DText" name="objMPUGrowthRateLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.MPUGrowthRate"/>
			<property name="nX" value="29"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="200"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objRegionMPUGrowth">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue18LeftFIT"/>
			<property name="strText" from="spdata.objRegionData.objRegion.fMPUGrowthRate.formatNumber(2, true)"/>
			<property name="nX" value="29"/>
			<property name="nY" value="15"/>
			<property name="nHeight" value="18"/>
		</object>

		<object type="mlui.UI2DText" name="objMPUGrowthPerTurn">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue10Left"/>
			<property name="strText" from="locale.SID.UI.PerTurn"/>
			<property name="nX" from="def.objRegionMPUGrowth.nX + def.objRegionMPUGrowth.nWidth + 4"/>
			<property name="nY" value="23"/>
			<property name="nWidth" value="70"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objGrowthRateModifiersLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.GrowthRateModifiers"/>
			<property name="nX" value="29"/>
			<property name="nY" value="44"/>
			<property name="nWidth" value="110"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DImage" name="objGrowthRateBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="1"/>
			<property name="nY" value="54"/>
			<property name="nWidth" value="282"/>
			<property name="nHeight" value="30"/>
			<property name="nDepth" value="-50"/>
		</object>

    <!--***********************************************************-->
    <!--MPU GROWTH MODIFIER SECTION-->
    
    <object type="mlui.UI2DImage" name="objRevoltRiskIcon">
      <property name="tmplImage">
        ?{template:
        switch{
        case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskNone'):
        skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskNoneSm')
        case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskLow'):
        skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskLowSm')
        case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskElevated'):
        skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskElevatedSm')
        case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskHigh'):
        skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskHighSm')
        case template == sd.getTemplateRef(gs_tbg.RegionStabilityTemplate, 'RevoltRiskSevere'):
        skin.getTemplateRef(mlmedia.ImageTemplate, 'ImgInfoIconRevoltRiskSevereSm')
        }
        }(gs_tbg.getGameSysNationRelations(mh2data.objAvatar).getRegionStabilityTemplate(spdata.objRegionData.objRegion.nRegionStability))
      </property>
      <property name="strToolTip" from="locale.SID.UI.RegionStability"/>
      <property name="nX" value="5"/>
      <property name="nY" value="58"/>
      <property name="nWidth" value="24"/>
      <property name="nHeight" value="25"/>
    </object>

    <propertyDef name="tmplRegionStabilityModifier" type="Template" restriction="gs_tbg.RegionStabilityTemplate" >
      if( spdata.objRegionData.objRegion != null, gs_tbg.getGameSysNationRelations(mh2data.objAvatar).getRegionStabilityTemplate(spdata.objRegionData.objRegion.nRegionStability), null)
    </propertyDef>
    
    <propertyDef name="nRegionStabilityModifier" type="int" >
        self.tmplRegionStabilityModifier.nMPUGrowthModifier
    </propertyDef>

    <object type="mlui.UI2DText" name="objRevoltRiskLevelValue">
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
      <property name="strText" from="def.nRegionStabilityModifier + '%'"/>
      <property name="nX" value="25"/>
      <property name="nY" value="64"/>
      <property name="nWidth" value="100"/>
      <property name="nHeight" value="16"/>
    </object>

    <object type="mlui.UI2DImage" name="objInfrastructureIcon">
			<property name="tmplImage" value="skin.ImgInfoIconPickaxe"/>
			<property name="strToolTip" from="locale.SID.UI.TransportationInfrastructure + ': ' + if (spdata.objRegionData.objRegion.objTransportationImprovement != null, spdata.objRegionData.objRegion.objTransportationImprovement.tmplTransportationImprovement.resolve().strDisplayName, locale.SID.UI.None)"/>
			<property name="nX" value="55"/>
			<property name="nY" value="57"/>
			<property name="nWidth" value="26"/>
			<property name="nHeight" value="26"/>
		</object>

		<object type="mlui.UI2DText" name="objInfrastructureModifier">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
			<property name="strText" from="if (spdata.objRegionData.objRegion.objTransportationImprovement != null, spdata.objRegionData.objRegion.objTransportationImprovement.tmplTransportationImprovement.resolve().nMPUGrowthModifier, 0) + '%'"/>
			<property name="nX" value="85"/>
			<property name="nY" value="64"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="10"/>
		</object>
    
    <object type="mlui.UI2DImage" name="objStatusIcon">
      <property name="tmplImage">
        switch {
          case spdata.objRegionData.objRegion.refOwner != spdata.objRegionData.objRegion.refController:
          "skin.ImgGovOccupied"

          case spdata.objRegionData.objRegion.refColony != null:
          "skin.ImgGovColony"

          default:
          "skin.ImgGovMasterNation"
        }
      </property>
      
      <property name="strToolTip">
        switch {
          case spdata.objRegionData.objRegion.refOwner != spdata.objRegionData.objRegion.refController:
          locale.SID.UI.OccupiedTerritory

          case spdata.objRegionData.objRegion.refColony != null:
          locale.SID.UI.ColonialTerritory

          default:
          locale.SID.UI.NationalTerritory
        }
      </property>
      <property name="nX" value="115"/>
      <property name="nY" value="52"/>
      <property name="nWidth" value="26"/>
      <property name="nHeight" value="26"/>
    </object>


        <object type="mlui.UI2DText" name="objStatusModifier">
            <property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
            <property name="strText">
            switch {
            case spdata.objRegionData.objRegion.refOwner != spdata.objRegionData.objRegion.refController:
            gs_tbg.getGameSysRegion(mh2data.objAvatar).nOccupiedMPUGrowthModifier + '%'

            case spdata.objRegionData.objRegion.refColony != null:
            gs_tbg.getGameSysRegion(mh2data.objAvatar).nColonyMPUGrowthModifier + '%'

            default:
            '0%'
            }
            </property>
            <property name="nX" value="145"/>
            <property name="nY" value="64"/>
            <property name="nWidth" value="30"/>
            <property name="nHeight" value="10"/>
        </object>

    <object type="mlui.UI2DImage" name="objMedicalCenterIcon">
      <property name="tmplImage" value="skin.ImgBldgMedicalCenterSM"/>
      <property name="strToolTip" from="locale.SID.UI.MedicalCenterBonus"/>
      <property name="nX" value="175"/>
      <property name="nY" value="54"/>
      <property name="nWidth" value="26"/>
      <property name="nHeight" value="26"/>
    </object>

    <object type="mlui.UI2DText" name="objMedicalCenterModifier">
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
      <property name="strText">
          if (spdata.objRegionData.objRegion.bHasMedicalCenter, gs_tbg.getGameSysRegion(mh2data.objAvatar).nMedicalCenterMPUGrowthModifier, 0) + '%'
      </property>
      <property name="nX" value="205"/>
      <property name="nY" value="64"/>
      <property name="nWidth" value="100"/>
      <property name="nHeight" value="16"/>
    </object>

    <object type="mlui.UI2DImage" name="objPublicSchoolIcon">
      <property name="tmplImage" value="skin.ImgBldgPublicSchoolSM"/>
      <property name="strToolTip" from="locale.SID.UI.PublicSchoolBonus"/>
      <property name="nX" value="230"/>
      <property name="nY" value="54"/>
      <property name="nWidth" value="26"/>
      <property name="nHeight" value="26"/>
    </object>

    <object type="mlui.UI2DText" name="objPublicSchoolModifier">
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
      <property name="strText">
          if (spdata.objRegionData.objRegion.bHasPublicSchool, gs_tbg.getGameSysRegion(mh2data.objAvatar).nPublicSchoolMPUGrowthModifier, 0) + '%'
      </property>
      <property name="nX" value="260"/>
      <property name="nY" value="63"/>
      <property name="nWidth" value="101"/>
      <property name="nHeight" value="17"/>
    </object>
    
    
    <!--MPU GROWTH MODIFIER SECTION ENDS-->
    <!--***********************************************************-->

		<!--<object type="mlui.UI2DText" name="objStabilityGrowthModifier">
			<property name="tmplTextStyle">
				if(gs_tbg.getGameSysNation(mh2data.objAvatar).getNationsStability(spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).nStability).nMPUGrowthModifier LTE 0,
				'locale.TxtStyleArialRed12Left' ,'locale.TxtStyleArialBlue12Left')
			</property>
			<property name="strToolTip" from="locale.SID.UI.NationalStability"/>
      
      <property name="strText" from="gs_tbg.getGameSysNation(mh2data.objAvatar).getNationsStability(spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).nStability).nMPUGrowthModifier + '%'"/>
			<property name="nX" value="60"/>
			<property name="nY" value="64"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="10"/>
		</object>-->
    
    <!--<object type="mlui.UI2DImage" name="objFoodGrowthIcon">
			<property name="tmplImage" value="skin.ImgInfoIconFoodSm"/>
			<property name="strToolTip" from="locale.SID.UI.Food"/>
			<property name="nX" value="90"/>
			<property name="nY" value="57"/>
			<property name="nWidth" value="19"/>
			<property name="nHeight" value="26"/>
		</object>

		<object type="mlui.UI2DText" name="objFoodGrowthModifier">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Center"/>
			<property name="strText" value="0%"/>
			<property name="nX" value="106"/>
			<property name="nY" value="64"/>
			<property name="nWidth" value="30"/>
			<property name="nHeight" value="10"/>
		</object>-->     
        
    <object type="mlui.UI2DImage" name="objUnassignedWorkforceIcon">
			<property name="tmplImage" value="skin.ImgInfoIconMPU"/>
			<property name="nX" value="160"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="32"/>
			<property name="nHeight" value="31"/>
		</object>

		<object type="mlui.UI2DText" name="objUnassignedWorkforceLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.IdleMPUs"/>
			<property name="nX" value="195"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objUnassignedWorkforce">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue20LeftFIT"/>
			<property name="strText" from="spdata.objRegionData.objRegion.nUnemployedMPUs.formatNumber(0, true)"/>
			<property name="nX" value="195"/>
			<property name="nY" value="15"/>
			<property name="nHeight" value="20"/>
		</object>

		<object type="mlui.UI2DText" name="objMPUGrowthPerTurn">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue10Left"/>
			<property name="strText" from="locale.SID.UI.MPUs"/>
			<property name="nX" from="def.objUnassignedWorkforce.nX + def.objUnassignedWorkforce.nWidth + 4"/>
			<property name="nY" value="25"/>
			<property name="nWidth" value="70"/>
			<property name="nHeight" value="10"/>
		</object>
        
        
	</objectDef>

	<objectDef type="SupplyRate" superType="mlui.UI2DElement">
		<object type="mlui.UI2DImage" name="objSupplyRateIcon">
			<property name="tmplImage" value="skin.ImgInfoIconSuppy"/>
			<property name="nX" value="0"/>
			<property name="nY" value="2"/>
			<property name="nWidth" value="18"/>
			<property name="nHeight" value="24"/>
		</object>

		<object type="mlui.UI2DText" name="objSupplyRateLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.SupplyRate"/>
			<property name="nX" value="28"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objSupplyRate">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue18Left"/>
			<property name="strText" from="spdata.objRegionData.objRegion.nArmsLimit + '%'"/>
			<property name="nX" value="28"/>
      <property name="nY" value="14"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="20"/>
		</object>

		<!-- Supply Increase Rate -->
		<object type="mlui.UI2DText" name="objSupplyIncreaseRateLabel" existsWhile="spdata.objRegionData.objRegion.nArmsLimit LT 100">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.SupplyIncreaseRate"/>
			<property name="nX" value="155"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objSupplyIncrease" existsWhile="spdata.objRegionData.objRegion.nArmsLimit LT 100">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue14LeftFIT"/>
			<property name="strText" from="spdata.objRegionData.objRegion.nArmsRecoveryRate + '%'"/>
			<property name="nX" value="155"/>
			<property name="nY" value="10"/>
			<property name="nHeight" value="18"/>
		</object>

		<object type="mlui.UI2DText" name="objSupplyIncreaseRate" existsWhile="spdata.objRegionData.objRegion.nArmsLimit LT 100">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue10Left"/>
			<property name="strText" from="locale.SID.UI.PerTurn"/>
			<property name="nX" from="def.objSupplyIncrease.nX + def.objSupplyIncrease.nWidth + 4"/>
			<property name="nY" value="14"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>        
        <!--
		<object type="SupplyModifiers" name="objSupplyModifiers" existsWhile="spdata.objRegionData.objRegion.nArmsLimit LT 100">
			<property name="nX" value="28"/>
			<property name="nY" value="40"/>
			<property name="nWidth" value="250"/>
			<property name="nHeight" value="50"/>
		</object>
        -->
	</objectDef>
    
	<objectDef type="SupplyModifiers" superType="mlui.UI2DElement">
		<object type="mlui.UI2DText" name="objSupplyModifiersLabel" >
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.SupplyModifiers"/>
			<property name="nX" value="0"/>
			<property name="nY" value="1"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="10"/>
		</object>
        
		<object type="mlui.UI2DImage" name="objPointSourcesBG">
			<property name="tmplImage" value="skin.ImgReportBubbleTanWhite"/>
			<property name="nX" value="0"/>
			<property name="nY" value="14"/>
			<property name="nWidth" value="243"/>
			<property name="nHeight" value="30"/>
        </object>        
            
        <object type="common_ui.UI2DListHorz" name="objSupplyModElements">
            <property name="nX" value="4"/>
			<property name="nY" value="14"/>
            <property name="nSpacing" value="4"/>
            
            <object type="mlui.UI2DImage" name="objElements">
                <property name="tmplImage" value="skin.ImgInfoIconCultureLatin"/>
                <property name="nX" value="34"/>
                <property name="nY" value="38"/>
                <property name="nWidth" value="24"/>
                <property name="nHeight" value="30"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            <object type="mlui.UI2DText" name="objElements">
                <property name="tmplTextStyle" value="locale.TxtStyleArialBlue14LeftFIT"/>
                <property name="strText" >
                    if(spdata.objRegionData.objRegion.tmplCulture == spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationTemplate().tmplCulture
                        ,
                        gs_tbg.getGameSysRegion(mh2data.objAvatar).nSupplyCultureBonus + '%'
                        ,
                        '0%'                    
                    )
                </property>
                <property name="nX" value="155"/>
                <property name="nY" value="10"/>
                <property name="nHeight" value="18"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            
            <object type="mlui.UI2DImage" name="objElements">
                <property name="tmplImage" from="mh2data.objReligionDisplayTable.getEntry(spdata.objRegionData.objRegion.tmplReligion).tmplImage"/>
                <property name="nX" value="176"/>
                <property name="nY" value="36"/>
                <property name="nWidth" value="23"/>
                <property name="nHeight" value="23"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            <object type="mlui.UI2DText" name="objElements">
                <property name="tmplTextStyle" value="locale.TxtStyleArialBlue14LeftFIT"/>
                <property name="strText" >
                    if(spdata.objRegionData.objRegion.tmplReligion == spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationTemplate().tmplReligion
                        ,
                        gs_tbg.getGameSysRegion(mh2data.objAvatar).nSupplyReligionBonus + '%'
                        ,
                        '0%'                     
                    )
                </property>
                <property name="nX" value="155"/>
                <property name="nY" value="10"/>
                <property name="nHeight" value="18"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            
            <object type="mlui.UI2DImage" name="objElements">
                <property name="tmplImage" value="skin.ImgInfoIconEthnicityMestizo"/>
                <property name="nX" value="30"/>
                <property name="nY" value="75"/>
                <property name="nWidth" value="30"/>
                <property name="nHeight" value="29"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            <object type="mlui.UI2DText" name="objElements">
                <property name="tmplTextStyle" value="locale.TxtStyleArialBlue14LeftFIT"/>
                <property name="strText" >
                    if(spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).getNationalityTemplate().tmplEthnicities.contains(spdata.objRegionData.objRegion.tmplEthnicity)
                        ,
                        gs_tbg.getGameSysRegion(mh2data.objAvatar).nSupplyEthnicityBonus + '%'
                        ,
                        '0%'                   
                    )
                </property>
                <property name="nX" value="155"/>
                <property name="nY" value="10"/>
                <property name="nHeight" value="18"/>
                <property name="vaYAlign" value="MIDDLE" />
            </object>
            
        </object>    

	</objectDef>

	<objectDef type="FoodDemand" superType="mlui.UI2DElement">
    <propertyDef name="nFactoryLaborDemand" type="int" >
      (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerCityMPU *
      sum(map(?{city: city.nCityMPUs }, spdata.objRegionData.objRegion.getCitiesInRegion(mh2data.objAvatar, gs_tbg.getAllCities(mh2data.objAvatar)))))
    </propertyDef>

    <propertyDef name="nResearchLaborDemand" type="int" >
      (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerCityMPU *
      sum(map(?{city: city.nResearchMPUs }, spdata.objRegionData.objRegion.getCitiesInRegion(mh2data.objAvatar, gs_tbg.getAllCities(mh2data.objAvatar)))))
    </propertyDef>

    <propertyDef name="nFoodLaborDemand" type="int" >
      (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerFoodMPU *
      spdata.objRegionData.objRegion.nFoodMPUs)
    </propertyDef>

    <propertyDef name="nResourceLaborDemand" type="int" >
      (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerResourceMPU *
      spdata.objRegionData.objRegion.nResourceMPUs)
    </propertyDef>

    <propertyDef name="nUnemployedLaborDemand" type="int" >
      (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerUnemployedMPU *
      spdata.objRegionData.objRegion.nUnemployedMPUs)
    </propertyDef>

    <propertyDef name="nTotalFoodDemand" type="int" >
      int (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerCityMPU *
      sum(map(?{city: city.nCityMPUs }, spdata.objRegionData.objRegion.getCitiesInRegion(mh2data.objAvatar, gs_tbg.getAllCities(mh2data.objAvatar))))) +
      int (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerCityMPU *
      sum(map(?{city: city.nResearchMPUs }, spdata.objRegionData.objRegion.getCitiesInRegion(mh2data.objAvatar, gs_tbg.getAllCities(mh2data.objAvatar))))) +
      int (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerResourceMPU *
      spdata.objRegionData.objRegion.nResourceMPUs) +
      int (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerFoodMPU *
      spdata.objRegionData.objRegion.nFoodMPUs) +
      int (spdata.objRegionData.objRegion.refController.resolve(mh2data.objAvatar).fFoodDemandPerUnemployedMPU *
      spdata.objRegionData.objRegion.nUnemployedMPUs) 
    </propertyDef>

    <object type="mlui.UI2DImage" name="objFoodDemandIcon">
			<property name="tmplImage" value="skin.ImgInfoIconFood"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="18"/>
			<property name="nHeight" value="24"/>
		</object>

		<object type="mlui.UI2DText" name="objFoodDemandLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkerBrown12Left"/>
			<property name="strText" from="locale.SID.UI.FoodDemand"/>
			<property name="nX" value="28"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="12"/>
		</object>

		<object type="mlui.UI2DText" name="objFoodDemand">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue20LeftFIT"/>
			<property name="strText" from="def.nTotalFoodDemand"/>
			<property name="nX" value="28"/>
			<property name="nY" value="13"/>
			<property name="nHeight" value="20"/>
      <property name="strToolTip">
        locale.SID.UI.FoodDemandModifiers  + '&#010;' +
        locale.SID.UI.FactoryLabor + ':   ' + def.nFactoryLaborDemand + '&#010;' +
        locale.SID.UI.ResearchLabor + ':   ' + def.nResearchLaborDemand + '&#010;' +
        locale.SID.UI.ResourceLabor + ':   ' + def.nResourceLaborDemand + '&#010;' +
        locale.SID.UI.FoodLabor + ':   ' + def.nFoodLaborDemand + '&#010;' +
        locale.SID.UI.UnemployedMPUs + ':   ' + def.nUnemployedLaborDemand
      </property>
		</object>

		<object type="mlui.UI2DText" name="objFoodDemandRate">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue10Left"/>
			<property name="strText" from="locale.SID.UI.PerTurn"/>
			<property name="nX" from="def.objFoodDemand.nX + def.objFoodDemand.nWidth + 4"/>
			<property name="nY" value="20"/>
			<property name="nWidth" value="100"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objFilledLabel">
			<property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
			<property name="strText" from="locale.SID.UI.Filled"/>
			<property name="nX" value="165"/>
			<property name="nY" value="2"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="10"/>
		</object>

		<object type="mlui.UI2DText" name="objFoodDemandFilled">
      <!--<property name="tmplTextStyle">
        if(spdata.objRegionData.objRegion.nFoodDemand > spdata.objRegionData.objRegion.nFoodConsumption, "locale.TxtStyleArialRed14Left", "locale.TxtStyleArialBlue14Left")
      </property>-->
      <property name="tmplTextStyle" value="locale.TxtStyleArialBlue14Left"/>
			<property name="strText">
        if(spdata.objRegionData.objRegion.nFoodDemand == 0, '100%',
          if(spdata.objRegionData.objRegion.nFoodDemand GT spdata.objRegionData.objRegion.nFoodConsumption,
            (float(spdata.objRegionData.objRegion.nFoodConsumption) / float(spdata.objRegionData.objRegion.nFoodDemand) * 100).formatNumber(0, true)
            + '%', '100%')
        )
      </property>
			<property name="nX" value="165"/>
			<property name="nY" value="14"/>
			<property name="nWidth" value="150"/>
			<property name="nHeight" value="18"/>
      <property name="strToolTip" from="locale.SID.UI.Consumption + ':  ' + (spdata.objRegionData.objRegion.nFoodConsumption)"/>
		</object>

    <object type="mlui.UI2DText" name="objFilledLabel">
      <property name="tmplTextStyle" value="locale.TxtStyleArialDarkBrown10Left"/>
      <property name="strText" from="locale.SID.UI.FoodSurplus"/>
      <property name="nX" value="165"/>
      <property name="nY" value="44"/>
      <property name="nWidth" value="150"/>
      <property name="nHeight" value="10"/>
    </object>
    
    <object type="mlui.UI2DText" name="objFoodDemandFilled">
      <property name="tmplTextStyle">
        if((spdata.objRegionData.objRegion.nFoodProduction - def.nTotalFoodDemand) > 0, "locale.TxtStyleArialBlue14Left", "locale.TxtStyleArialRed14Left")
      </property>
      <property name="strText">
        if((spdata.objRegionData.objRegion.nFoodProduction - def.nTotalFoodDemand) > 0, '+', '')
        + (spdata.objRegionData.objRegion.nFoodProduction - def.nTotalFoodDemand)
      </property>
      <property name="nX" value="165"/>
      <property name="nY" value="56"/>
      <property name="nWidth" value="150"/>
      <property name="nHeight" value="18"/>
      <property name="strToolTip">
        locale.SID.UI.Consumption + ':  ' + (spdata.objRegionData.objRegion.nFoodConsumption) + '&#010;' +
        locale.SID.UI.FoodProduction + ':  ' + (spdata.objRegionData.objRegion.nFoodProduction)
      </property>
    </object>
    
    </objectDef>

	<objectDef type="UI2DRegionFoodDemandModElem" superType="mlui.UI2DElement">
        <propertyDef name="tmplImage" type="TemplateRef" restriction="mlmedia.ImageTemplate"/>
        <propertyDef name="fAmount" type="float" />
        <property name="nHeight" value="30" />
		<property name="nWidth" from="self.objIcon.nWidth + 36"/>
        
		<object type="mlui.UI2DImage" name="objIcon">
			<property name="tmplImage" from="def.tmplImage"/>
			<property name="nX" value="0"/>
			<property name="nY" value="0"/>
			<property name="nWidth" value="28"/>
			<property name="nHeight" value="27"/>
            <property name="vaYAlign" value="MIDDLE"/>
		</object>

		<object type="mlui.UI2DText" name="objStabilityGrowthModifier">
			<property name="tmplTextStyle" value="locale.TxtStyleArialBlue12Left"/>
			<property name="strText" from="def.fAmount.formatNumber(0, true)"/>
			<property name="nX" from="def.objIcon.nWidth + 5"/>
			<property name="nY" value="9"/>
			<property name="nWidth" value="50"/>
			<property name="nHeight" value="20"/>
		</object>
	</objectDef>
    
	<!-- Infrastructure Costs -->
	<objectDef type="UI2DRegionInfrastructureCosts" superType="mlui.UI2DElement">

	</objectDef>
</locust>
